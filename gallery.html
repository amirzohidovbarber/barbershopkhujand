<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
    <link rel="stylesheet" href="./css/style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap"
        rel="stylesheet">

</head>

<body>
    <div id="app" class="app">
        <header class="site-header">
            <div class="buttons">
                <button id="uploadBtn">üì∏ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
            </div>
            <input type="file" id="fileInput" accept="image/*" style="display:none">
        </header>

        <section id="gallery" class="section">
            <div class="container">
                <h2 class="section-title"><span class="gold">–ì–∞–ª–µ—Ä–µ—è</span> —Ä–∞–±–æ—Ç</h2>
                <div class="gallery">
                    <img src="https://images.unsplash.com/photo-1621605815971-fbc98d665033?auto=format&fit=crop&w=800&q=60"
                        alt="">
                    <img src="https://images.unsplash.com/photo-1605497788044-5a32c7078486?auto=format&fit=crop&w=800&q=60"
                        alt="">
                    <img src="https://images.unsplash.com/photo-1622286342621-4bd786c2447c?auto=format&fit=crop&w=800&q=60"
                        alt="">
                    <img src=""
                        alt="">
                </div>
            </div>
        </section>
</body>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
<div id="lightbox" class="lightbox">
    <span id="closeLightbox" class="lightbox-close">&times;</span>
    <img class="lightbox-img" src="">
</div>

<script>
    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('fileInput');
    const gallery = document.querySelector('.gallery');

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.querySelector('.lightbox-img');
    const closeLightbox = document.getElementById('closeLightbox');

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å –∫–Ω–æ–ø–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è
    function addImage(src, id) {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        item.dataset.id = id;

        const img = document.createElement('img');
        img.src = src;

        const delBtn = document.createElement('button');
        delBtn.className = 'delete-btn';
        delBtn.textContent = 'üóëÔ∏è';
        delBtn.addEventListener('click', () => {
            gallery.removeChild(item);
            let images = JSON.parse(localStorage.getItem('galleryImages') || '[]');
            images = images.filter(i => i.id !== id);
            localStorage.setItem('galleryImages', JSON.stringify(images));
        });

        item.appendChild(img);
        item.appendChild(delBtn);
        gallery.prepend(item);
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', () => {
        const images = JSON.parse(localStorage.getItem('galleryImages') || '[]');
        images.forEach(i => addImage(i.src, i.id));
    });

    // –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
    uploadBtn.addEventListener('click', () => fileInput.click());

    // –í—ã–±–æ—Ä —Ñ–∞–π–ª–∞
    fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function (event) {
            const id = Date.now();
            addImage(event.target.result, id);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ LocalStorage
            const images = JSON.parse(localStorage.getItem('galleryImages') || '[]');
            images.unshift({ id, src: event.target.result });
            localStorage.setItem('galleryImages', JSON.stringify(images));
        };
        reader.readAsDataURL(file);
    });

    // Lightbox –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ
    gallery.addEventListener('click', (e) => {
        if (e.target.tagName === 'IMG') {
            lightbox.style.display = 'flex';
            lightboxImg.src = e.target.src;
        }
    });

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ
    closeLightbox.addEventListener('click', () => {
        lightbox.style.display = 'none';
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
    lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
            lightbox.style.display = 'none';
        }
    });

</script>



</html>